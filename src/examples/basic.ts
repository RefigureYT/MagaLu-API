import { MagaluAPI } from "../index";

const magaluJF = new MagaluAPI({
    baseUrl: "https://api.magalu.com",
    accessToken: "eyJraWQiOiI2VERTaF9XcHp0VldSZG9DVlZ6emZyZng5OFFQTERUZ1lWSzlBQmdmZUxZIiwiYWxnIjoiUlMyNTYifQ.eyJpc3MiOiJodHRwczovL2F1dG9zZWctaWRwLmx1aXphbGFicy5jb20vIiwiaWF0IjoxNzY5NjE5NjAxLCJqdGkiOiI3NDM3NzRkMC0xZjcwLTRjYzAtODc0Ni1jNTczN2IwYjI1YjMiLCJhdWQiOlsiaHR0cHM6Ly9hcGkubWFnYWx1LmNvbSIsImh0dHBzOi8vc2VydmljZXMubWFnYWx1LmNvbSJdLCJzY29wZSI6ImFwaWluOmFsbCBvcGVuOmZ1bGZpbGxtZW50LXNoaXBwaW5ncy1zZWxsZXI6cmVhZCBvcGVuOmZ1bGZpbGxtZW50LXNoaXBwaW5ncy1zZWxsZXI6d3JpdGUgb3Blbjpsb2dpc3RpYy1jYXJyaWVyLXNoaXBwaW5nczpyZWFkIG9wZW46bG9naXN0aWMtY2Fycmllci10cmFja2luZy1sb2NhdGlvbnM6Y3JlYXRlIG9wZW46bG9naXN0aWMtY2Fycmllci10cmFja2luZ3M6Y3JlYXRlIG9wZW46bG9naXN0aWMtY2Fycmllci10cmFja2luZ3M6cmVhZCBvcGVuOmxvZ2lzdGljLXNlbGxlci1zaGlwcGluZ3M6cmVhZCBvcGVuOmxvZ2lzdGljLXNlbGxlci1zaGlwcGluZ3M6d3JpdGUgb3Blbjpsb2dpc3RpYy1zZWxsZXItdHJhY2tpbmdzOnJlYWQgb3BlbjpvcmRlci1kZWxpdmVyeS1zZWxsZXI6cmVhZCBvcGVuOm9yZGVyLWRlbGl2ZXJ5LXNlbGxlcjp3cml0ZSBvcGVuOm9yZGVyLWludm9pY2Utc2VsbGVyOnJlYWQgb3BlbjpvcmRlci1pbnZvaWNlOnJlYWQgb3BlbjpvcmRlci1sb2dpc3RpY3Mtc2VsbGVyOnJlYWQgb3BlbjpvcmRlci1sb2dpc3RpY3Mtc2VsbGVyOndyaXRlIG9wZW46b3JkZXItb3JkZXItc2VsbGVyOnJlYWQgb3Blbjpwb3J0Zm9saW8tcHJpY2VzLXNlbGxlcjpyZWFkIG9wZW46cG9ydGZvbGlvLXByaWNlcy1zZWxsZXI6d3JpdGUgb3Blbjpwb3J0Zm9saW8tcHJpY2VzOnJlYWQgb3Blbjpwb3J0Zm9saW8tcHJpY2VzOndyaXRlIG9wZW46cG9ydGZvbGlvLXNrdXMtc2VsbGVyOnJlYWQgb3Blbjpwb3J0Zm9saW8tc2t1cy1zZWxsZXI6d3JpdGUgb3Blbjpwb3J0Zm9saW8tc2t1czpyZWFkIG9wZW46cG9ydGZvbGlvLXNrdXM6d3JpdGUgb3Blbjpwb3J0Zm9saW8tc3RvY2tzLXNlbGxlcjpyZWFkIG9wZW46cG9ydGZvbGlvLXN0b2Nrcy1zZWxsZXI6d3JpdGUgb3Blbjpwb3J0Zm9saW8tc3RvY2tzOnJlYWQgb3Blbjpwb3J0Zm9saW8tc3RvY2tzOndyaXRlIG9wZW46cG9ydGZvbGlvLXZlaGljbGVzLWNvbXBhdGliaWxpdHktc2VsbGVyOndyaXRlIG9wZW46cG9ydGZvbGlvLXZlaGljbGVzLXNlbGxlcjpyZWFkIG9wZW46c2FjLXRyYW5zYWN0aW9uLXNlbGxlcjpyZWFkIG9wZW46c2hpcHBpbmctb3JkZXItc2hpcHBpbmctdHJhY2tpbmctc2VsbGVyOnJlYWQgb3BlbjpzaGlwcGluZy1vcmRlci1zaGlwcGluZy10cmFja2luZy1zZWxsZXI6d3JpdGUgb3Blbjp0aWNrZXQtZXZlbnRzLXNlbGxlcjpyZWFkIG9wZW46dGlja2V0LWV2ZW50cy1zZWxsZXI6d3JpdGUgb3Blbjp0aWNrZXQtbWVzc2FnZXMtc2VsbGVyOnJlYWQgb3Blbjp0aWNrZXQtbWVzc2FnZXMtc2VsbGVyOndyaXRlIG9wZW46dGlja2V0LXJldHVybnMtc2VsbGVyOnJlYWQgb3Blbjp0aWNrZXQtcmV0dXJucy1zZWxsZXI6d3JpdGUgb3Blbjp0aWNrZXRzLXNlbGxlcjpyZWFkIG9wZW46dGlja2V0cy1zZWxsZXI6d3JpdGUgc2VydmljZXM6Y29udmVyc2F0aW9ucy1zZWxsZXI6cmVhZCBzZXJ2aWNlczpjb252ZXJzYXRpb25zLXNlbGxlcjp3cml0ZSBzZXJ2aWNlczpxdWVzdGlvbnMtc2VsbGVyOnJlYWQgc2VydmljZXM6cXVlc3Rpb25zLXNlbGxlcjp3cml0ZSBzZXJ2aWNlczp0aWNrZXQtbWVzc2FnZXMtc2VsbGVyOnJlYWQgc2VydmljZXM6dGlja2V0LW1lc3NhZ2VzLXNlbGxlcjp3cml0ZSBzZXJ2aWNlczp0aWNrZXRzLXNlbGxlcjpyZWFkIHNlcnZpY2VzOnRpY2tldHMtc2VsbGVyOndyaXRlIiwiYXpwIjoiUVRhajBIcDdFbEwyamdXNFdIemxOV2J6RlFLaXpOQjhKSXJCZEF1OXcxZyIsInByb2ZpbGluZyI6ImlkbV9jMzc4MzEzYy1hNDVjLTRmYTUtYjA0Yi0xNmUzNDQzOGM2MDQiLCJyZXZpc2lvbiI6InYxIiwiYW1yIjpbInBhc3N3b3JkIiwibWZhIiwibWZhOnRvdHAiXSwiZXhwIjoxNzY5NjI2ODAyLCJwaWQiOiI5ZjVhN2QzMC03ODlhLTQzZDEtOTc0Ny01YzFiZGVlOWRlNGYiLCJ0ZW5hbnQiOiJHRU5QVUIuZTAyYjRlYmQtOGUyMy00YmViLWIxYTctNGIzNmVkNTZmN2JhIiwiZW1haWwiOiJtYXJjZWxvLmphdXBlc2NhQGdtYWlsLmNvbSIsInN1YiI6IjY3MTY1ZDNjLWFhMjQtNDhiNi1hNDFmLWU3ODNlZWY4NmUzNCIsInRlbmFudF90aXRsZSI6Im9yZ2FuaXphdGlvbiJ9.r2aDvg_15JpaVeiY9qJN4L8iMpA8hvy4gPb0YctAbZXqic4fufVHRnfY562MTDiLXvurOqGJCYKtDSHlPbXdlvfMk1K2PPQ4kFavij4DkD-SpNjYJRpPaf1CeKvyjN6HK2EFUxvzUSvPVXzT1-qoa33CH0AjFJifDPbYMRBpO_o"
});

const listPedidos = await magaluJF.orders.getListPedidos({
    _limit: 100,
    _offset: 0,
    _sort: "purchased_at:desc"
});
console.log(listPedidos.results.length);
console.log(listPedidos.results[0]);


const firstResult = listPedidos.results[0];
if (firstResult) {
    const invocePedido = await magaluJF.deliveries.getInvoiceByOrder({ orderId: '1504270096391668' });
    console.log('invoice:', invocePedido);
    const firstDelivery = firstResult.deliveries[0];
    if (firstDelivery) {
        const firstItem = firstDelivery.items[0];
        if (firstItem) {
            console.log('Produto:', firstItem.info.name);
        }
    }
}